<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>DBpia ë…¼ë¬¸ ì¶”ì²œ</title>

  <!-- favicon ì ìš© -->
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon">

  <style>
    * { box-sizing: border-box; }
    body { font-family: 'Segoe UI', sans-serif; background: #f5f7fa; margin: 0; }
    .container {
      max-width: 800px;
      margin: 40px auto;
      background: white;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    h1 { text-align: center; color: #333; }
    button {
      padding: 8px 16px;
      background: #007BFF; color: white;
      border: none; border-radius: 6px;
      cursor: pointer; font-size: 14px;
    }
    button:hover { background: #0056b3; }
    .form-row { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 16px; align-items: center; }
    .form-row label {
      display: flex; align-items: center; gap: 8px;
      font-weight: 600; flex: 1;
    }
    .form-row input, .form-row select {
      flex: 1; padding: 6px 8px; border: 1px solid #ccc; border-radius: 4px;
    }
    #top-bar { display: flex; justify-content: flex-end; gap: 10px; margin-bottom: 20px; }
    #greeting { font-weight: 600; align-self: center; }
    #logout { display: none; }

    /* ë¶ë§ˆí¬ ë²„íŠ¼ */
    .bookmark-btn { margin-left: 10px; background: #ffb300; color: #333; }
    .bookmark-btn.bookmarked { background: #ffd54f !important; color: #007BFF !important; }

    /* ëª¨ë‹¬ ê³µí†µ */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      align-items: center; justify-content: center;
      z-index: 1000;
    }
    .modal.active { display: flex; }

    .modal-content {
      background: #fff;
      padding: 20px 30px;
      border-radius: 8px;
      width: 500px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      z-index: 1001; /* ëª¨ë‹¬ ë°°ê²½ ìœ„ì— ëœ¨ë„ë¡ */
    }

    .modal-close {
      position: absolute;
      top: 10px; right: 12px;
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      z-index: 1002; /* ë‹«ê¸° ë²„íŠ¼ì„ ê°€ì¥ ìœ„ì— ë°°ì¹˜ */
      color: #333;
    }
    .modal-close:hover { color: #e74c3c; }

    .message { color: green; font-size: 0.9em; text-align: center; margin-top: 8px; }

    /* ì¶”ì²œ */
    .subject-group { margin-top: 10px; padding-left: 10px; }
    .subject-group label { display: inline-block; margin-right: 15px; font-weight: normal; }
    #result { margin-top: 40px; }
    .paper {
      background: #f1f4f8; padding: 16px 20px; border-radius: 10px;
      margin-bottom: 15px; border-left: 5px solid #007BFF; position: relative;
    }
    .paper strong { font-size: 18px; color: #222; }
    .paper em { color: #666; display: block; margin-top: 4px; font-style: normal; }
    .paper a { display: inline-block; margin-top: 8px; color: #007BFF; text-decoration: none; }
    .paper a:hover { text-decoration: underline; }

    /* ë‚´ ì¦ê²¨ì°¾ê¸° ëª¨ë‹¬ */
    #modal-bookmark .modal-content { width: 500px; max-height: 70vh; overflow-y: auto; }
    .bm-list { margin: 0; padding: 0; list-style: none; }
    .bm-list li {
      margin-bottom: 15px;
      background: #f9fbe7;
      padding: 13px 18px;
      border-radius: 8px;
      border-left: 5px solid #ffd54f;
      position: relative;
      padding-right: 80px; /* ì˜¤ë¥¸ìª½ ì—¬ë°± í™•ë³´ */
      word-break: keep-all;
    }
    .bm-remove {
      position: absolute;
      top: 50%;
      right: 16px;
      transform: translateY(-50%);
      color: #e74c3c;
      background: none;
      border: none;
      font-size: 16px;
      cursor: pointer;
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë§ˆì´í˜ì´ì§€ ë‚´ë¶€ íƒ­ ë²„íŠ¼ ìƒ‰ìƒ ë³´ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    /* ê¸°ì¡´ íƒ­ ë²„íŠ¼(.tab-buttons button)ì´ íšŒìƒ‰ìœ¼ë¡œ í‘œì‹œë˜ë˜ ê²ƒì„ íŒŒë€ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
    .tab-buttons button {
      padding: 8px 16px;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 8px;
    }
    .tab-buttons button:hover {
      background: #0056b3;
    }
    .tab-buttons button.active {
      background: #0056b3; /* í™œì„±í™”ëœ íƒ­ì€ ë” ì§„í•œ íŒŒë€ìƒ‰ */
    }
    .mypage-tab { margin-top: 10px; }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë§ˆì´í˜ì´ì§€ ë‚´ë¶€ 'ë³€ê²½í•˜ê¸°' ë²„íŠ¼ ìƒ‰ìƒ ë³´ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    /* ë‹‰ë„¤ì„ ë³€ê²½, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í¼ ë‚´ ë²„íŠ¼ì„ ê¸°ë³¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ê³¼ ë™ì¼í•˜ê²Œ ì ìš© */
    #nickname-form button,
    #mypage-form button {
      padding: 8px 16px;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    #nickname-form button:hover,
    #mypage-form button:hover {
      background: #0056b3;
    }
  </style>
  <link rel="stylesheet" href="/static/css/style.css">

  <!-- CSS Override for Bookmark Modal Flex Layout -->
  <style>
    #modal-bookmark .bm-list li {
      display: flex !important;
      justify-content: space-between !important;
      align-items: center !important;
      margin-bottom: 15px;
      background: #f9fbe7;
      padding: 13px 18px;
      border-radius: 8px;
      border-left: 5px solid #ffd54f;
      word-break: break-word;
    }
    #modal-bookmark .bm-list li .bm-title {
      flex: 1;
      margin-right: 12px;
      white-space: normal;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    #modal-bookmark .bm-remove {
      position: static !important;
      transform: none !important;
      margin-left: 12px !important;
      color: #e74c3c;
      background: none;
      border: none;
      font-size: 16px;
      cursor: pointer;
    }
    /* ID/ìƒì„¸ë³´ê¸° í•œ ì¤„ë¡œ */
    #modal-bookmark .bm-info {
      display: inline-block !important;
      white-space: nowrap !important;
      margin: 0 12px !important;
      font-size: 0.9em;
    }
    #modal-bookmark .bm-info a {
      text-decoration: underline !important;
      margin-left: 4px !important;
    }
  </style>
  <!-- End CSS Override -->
</head>
<body>
  <div class="container">
    <h1>ğŸ“š DBpia ì¸ê¸° ë…¼ë¬¸ ì¶”ì²œ ì‹œìŠ¤í…œ</h1>

    <!-- ìƒë‹¨ë°” -->
    <div id="top-bar">
      <button id="open-signup">íšŒì›ê°€ì…</button>
      <button id="open-login">ë¡œê·¸ì¸</button>
      <span id="greeting"></span>
      <button id="open-bookmark" style="display:none;">ë‚´ ì¦ê²¨ì°¾ê¸°</button>
      <button id="open-mypage" style="display:none;">ë§ˆì´í˜ì´ì§€</button>
      <button id="logout">ë¡œê·¸ì•„ì›ƒ</button>
    </div>

    <!-- ì¶”ì²œ í¼ -->
    <form id="recommend-form">
      <div class="form-row">
        <label>ì—°ë„ ì„ íƒ
          <select name="pyear">
            <option value="">(ì„ íƒ ì•ˆ í•¨)</option>
            <option value="2024">2024</option>
            <option value="2023">2023</option>
          </select>
        </label>
        <label>ì›” ì„ íƒ
          <select name="pmonth">
            <option value="">(ì„ íƒ ì•ˆ í•¨)</option>
            <option value="01">1ì›”</option>
            <option value="02">2ì›”</option>
            <option value="03">3ì›”</option>
            <option value="04">4ì›”</option>
            <option value="05">5ì›”</option>
            <option value="06">6ì›”</option>
            <option value="07">7ì›”</option>
            <option value="08">8ì›”</option>
            <option value="09">9ì›”</option>
            <option value="10">10ì›”</option>
            <option value="11">11ì›”</option>
            <option value="12">12ì›”</option>
          </select>
        </label>
      </div>
      <div class="form-row">
        <label>ì •ë ¬ ê¸°ì¤€:
          <select name="sort_by">
            <option value="popularity">ì¸ê¸°ìˆœ</option>
            <option value="title">ì œëª©ìˆœ</option>
          </select>
        </label>
        <label>ì •ë ¬ ìˆœì„œ:
          <select name="order">
            <option value="desc">ë‚´ë¦¼ì°¨ìˆœ</option>
            <option value="asc">ì˜¤ë¦„ì°¨ìˆœ</option>
          </select>
        </label>
      </div>
      <div class="form-row" style="display: flex; gap: 8px;">
        <label style="flex: 2;">ê²€ìƒ‰:
          <select name="query_field" id="queryField" style="width: 100%;">
            <option value="all">ì „ì²´</option>
            <option value="title">ë…¼ë¬¸ëª…</option>
            <option value="author">ì €ìëª…</option>
          </select>
        </label>
        <label style="flex: 8;">
          <input type="text" name="query" id="searchInput" list="recentList" placeholder="ë…¼ë¬¸ ì œëª© ë˜ëŠ” ì €ì" style="width: 100%;">
          <datalist id="recentList"></datalist>
        </label>
      </div>
      <div class="form-row">
        <label>ì£¼ì œ ë¶„ë¥˜:</label>
        <div class="subject-group">
          <label><input type="radio" name="category" value="">ì „ì²´</label>
          <label><input type="radio" name="category" value="1">ì¸ë¬¸í•™</label>
          <label><input type="radio" name="category" value="2">ì‚¬íšŒê³¼í•™</label>
          <label><input type="radio" name="category" value="3">ìì—°ê³¼í•™</label>
          <label><input type="radio" name="category" value="4">ê³µí•™</label>
          <label><input type="radio" name="category" value="5">ì˜ì•½í•™</label>
          <label><input type="radio" name="category" value="6">ë†ìˆ˜í•´ì–‘</label>
          <label><input type="radio" name="category" value="7">ì˜ˆìˆ ì²´ìœ¡</label>
          <label><input type="radio" name="category" value="8">ë³µí•©í•™</label>
          <label><input type="radio" name="category" value="9">êµì–‘</label>
        </div>
      </div>
      <button type="submit">ë…¼ë¬¸ ì¶”ì²œë°›ê¸°</button>
    </form>
    <div id="result"></div>
  </div>

  <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
  <div id="modal-signup" class="modal">
    <div class="modal-content">
      <button class="modal-close" data-close="modal-signup">&times;</button>
      <h2>íšŒì›ê°€ì…</h2>
      <form id="signup-form">
        <div class="form-row"><label>ì•„ì´ë””<input type="text" name="username" required minlength="3"></label></div>
        <div class="form-row"><label>ë‹‰ë„¤ì„<input type="text" name="nickname" required minlength="2"></label></div>
        <div class="form-row"><label>ë¹„ë°€ë²ˆí˜¸<input type="password" name="password" required minlength="6"></label></div>
        <button type="submit">ê°€ì…í•˜ê¸°</button>
      </form>
      <div id="signup-msg" class="message"></div>
    </div>
  </div>

  <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
  <div id="modal-login" class="modal">
    <div class="modal-content">
      <button class="modal-close" data-close="modal-login">&times;</button>
      <h2>ë¡œê·¸ì¸</h2>
      <form id="login-form">
        <div class="form-row"><label>ì•„ì´ë””<input type="text" name="username" required></label></div>
        <div class="form-row"><label>ë¹„ë°€ë²ˆí˜¸<input type="password" name="password" required></label></div>
        <button type="submit">ë¡œê·¸ì¸</button>
      </form>
      <div id="login-msg" class="message"></div>
    </div>
  </div>

  <!-- ë§ˆì´í˜ì´ì§€ ëª¨ë‹¬ -->
  <div id="modal-mypage" class="modal">
    <div class="modal-content">
      <button class="modal-close" data-close="modal-mypage">&times;</button>
      <h2>ë§ˆì´í˜ì´ì§€</h2>

      <!-- íƒ­ ë²„íŠ¼ -->
      <div class="tab-buttons" style="display: flex; gap: 10px; margin-bottom: 10px;">
        <button class="tab-btn active" data-tab="tab-nickname">ë‹‰ë„¤ì„ ë³€ê²½</button>
        <button class="tab-btn" data-tab="tab-password">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
      </div>
      <hr style="margin: 10px 0;">

      <!-- ë‹‰ë„¤ì„ ë³€ê²½ íƒ­ -->
      <div id="tab-nickname" class="mypage-tab">
        <form id="nickname-form">
          <div class="form-row">
            <label>ìƒˆ ë‹‰ë„¤ì„<input type="text" name="nickname" required minlength="2"></label>
          </div>
          <button type="submit">ë³€ê²½í•˜ê¸°</button>
        </form>
        <div id="nickname-msg" class="message"></div>
      </div>

      <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ íƒ­ -->
      <div id="tab-password" class="mypage-tab" style="display: none;">
        <form id="mypage-form">
          <div class="form-row"><label>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸<input type="password" name="current_password" required minlength="6"></label></div>
          <div class="form-row"><label>ìƒˆ ë¹„ë°€ë²ˆí˜¸<input type="password" name="new_password" required minlength="6"></label></div>
          <button type="submit">ë³€ê²½í•˜ê¸°</button>
        </form>
        <div id="mypage-msg" class="message"></div>
      </div>
    </div>
  </div>

  <!-- ë‚´ ì¦ê²¨ì°¾ê¸° ëª¨ë‹¬ -->
  <div id="modal-bookmark" class="modal">
    <div class="modal-content">
      <button class="modal-close" data-close="modal-bookmark">&times;</button>
      <h2>ë‚´ ì¦ê²¨ì°¾ê¸° ë…¼ë¬¸</h2>
      <ul class="bm-list" id="bm-list"></ul>
      <div id="bookmark-msg" class="message"></div>
    </div>
  </div>

  <!-- ë¶„í• ëœ JS íŒŒì¼ ë¡œë“œ -->
  <script src="/static/js/utils.js"></script>
  <script src="/static/js/search.js"></script>
  <script src="/static/js/modal.js"></script>
  <script src="/static/js/auth.js"></script>
  <script src="/static/js/bookmarks.js"></script>
  <script src="/static/js/mypage.js"></script>
  <script src="/static/js/signup.js"></script>
  <script src="/static/js/index.js"></script>
</body>
</html>
